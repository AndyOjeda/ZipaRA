<div class="home-container">
  <header class="home-header">
    <div class="user-info">
      <img src="assets/img/icon.jpg" alt="Profile" class="avatar" />
      <div>
        <p class="hello">Hey, {{usuario?.nombre}} 👋</p>
        <p class="location">📍 Zipaquirá</p>
      </div>
    </div>
    <div class="notification">
      <i class="fas fa-bell"></i>
    </div>
  </header>

  <!-- 🔍 Barra de búsqueda -->
  <div class="search-bar">
    <input [(ngModel)]="searchQuery"
          (ngModelChange)="onSearchChange($event)"
          type="text"
          placeholder="Encuentra lugares interesantes..." />
    <button class="search-btn" (click)="onSearchChange(searchQuery)">🔍</button>
  </div>

  <!-- 📋 Lista de resultados simples debajo del buscador -->
  <ul class="search-results" *ngIf="searchQuery && searchResults.length > 0">
    <li class="search-item"
        *ngFor="let item of searchResults"
        (click)="goToSearchDetail(item)">
      <i class="fas fa-search"></i>
      <span>{{ item.nombre }}</span>
    </li>
  </ul>


  <!-- Categorías -->
  <section class="book-now">
    <h3>Categorias</h3>
    <div class="icons-row">
      <div class="icon-btn"
           *ngFor="let cat of categorias"
           [class.active]="selectedCategory === cat.id"
           (click)="selectedCategory = cat.id">
        <i [class]="cat.icon"></i>
        <span>{{cat.label}}</span>
      </div>
    </div>
  </section>

  <!-- ===== HOTELES ===== -->
  <section class="popular-trips" *ngIf="selectedCategory === 'hoteles'">
    <div class="section-header">
      <h3 class="mt-2">Hoteles Populares</h3>
    </div>
    <div class="trip-cards">
      <div class="trip-card" *ngFor="let h of hoteles" (click)="goToDetail(h.id)">
        <img [src]="'http://localhost:4000' + h.imagen" [alt]="h.nombre" />
        <div class="card-info">
          <p class="place-name">{{h.nombre}}</p>
          <p class="price">
            {{ h.precio | currency:'USD':'symbol':'1.0-0':'en-US' }}
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== RESTAURANTES ===== -->
  <section class="categories" *ngIf="selectedCategory === 'restaurantes'">
    <div class="section-header">
      <h3 class="mt-2">Restaurantes</h3>
    </div>
    <div class="trip-cards">
      <div class="trip-card" *ngFor="let r of restaurantes" (click)="goToDetail(r.id)">
        <img [src]="'http://localhost:4000' + r.imagen" [alt]="r.nombre" />
        <div class="card-info">
          <p class="place-name">{{ r.nombre }}</p>
          <p class="price">
            {{ r.precio_min | currency:'USD':'symbol':'1.0-0':'en-US' }} - 
            {{ r.precio_max | currency:'USD':'symbol':'1.0-0':'en-US' }}
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== EVENTOS ===== -->
  <section class="recommended" *ngIf="selectedCategory === 'eventos'">
    <h3>Eventos</h3>
    <div class="trip-cards">
      <div class="trip-card" *ngFor="let e of eventos" (click)="goToDetail(e.id)">
        <img [src]="'http://localhost:4000' + e.imagen" [alt]="e.nombre" />
        <div class="card-info">
          <p class="place-name">{{ e.nombre }}</p>
          <p class="price">{{ e.fecha | date:'dd/MM/yyyy' }}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== ACTIVIDADES ===== -->
  <section class="recommended" *ngIf="selectedCategory === 'actividades'">
    <h3>Actividades</h3>
    <div class="trip-cards">
      <div class="trip-card" *ngFor="let a of actividades" (click)="goToDetail(a.id)">
        <img [src]="'http://localhost:4000' + a.imagen" [alt]="a.nombre" />
        <div class="card-info">
          <p class="place-name">{{ a.nombre }}</p>
          <p class="price"> {{ a.fecha | date:'dd/MM/yyyy' }}</p>
        </div>
      </div>
    </div>
  </section>

  <app-bottom-nav></app-bottom-nav>
</div>
